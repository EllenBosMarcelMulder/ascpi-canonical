# hexSYStemOPErates

## Reference Verifier — Executable Code (Python)

### Bestand: `hexsys_verifier.py`

`import ast import json import copy from typing import List, Dict, Any  # ----------------------------- # Verifier Result # -----------------------------  class VerifierResult:    def __init__(self):        self.pass_all = True         self.violations = []    def fail(self, predicate):        self.pass_all = False         self.violations.append(predicate)    def summary(self):        return {            "pass": self.pass_all,            "violations": self.violations         }  # ----------------------------- # Predicate P1 — Non-decisional # -----------------------------  FORBIDDEN_AST_NODES = (     ast.If,     ast.IfExp,     ast.Switch if hasattr(ast, "Switch") else (), ) FORBIDDEN_NAMES = {    "min", "max", "argmin", "argmax" }  def check_non_decisional(source_code: str, result: VerifierResult):     tree = ast.parse(source_code)    for node in ast.walk(tree):        if isinstance(node, FORBIDDEN_AST_NODES):             result.fail("P1_NON_DECISIONAL")            return          if isinstance(node, ast.Call):            if isinstance(node.func, ast.Name):                if node.func.id in FORBIDDEN_NAMES:                     result.fail("P1_NON_DECISIONAL")                    return  # ----------------------------- # Predicate P2 — No Optimization # -----------------------------  FORBIDDEN_MUTATIONS = (     ast.AugAssign, )  def check_no_optimization(source_code: str, result: VerifierResult):     tree = ast.parse(source_code)    for node in ast.walk(tree):        if isinstance(node, FORBIDDEN_MUTATIONS):             result.fail("P2_NO_OPTIMIZATION")            return  # ----------------------------- # Predicate P3 — Time Neutrality # -----------------------------  FORBIDDEN_TIME_CALLS = {    "time", "sleep", "perf_counter", "monotonic" }  def check_time_neutrality(source_code: str, result: VerifierResult):     tree = ast.parse(source_code)    for node in ast.walk(tree):        if isinstance(node, ast.Call):            if isinstance(node.func, ast.Attribute):                if node.func.attr in FORBIDDEN_TIME_CALLS:                     result.fail("P3_TIME_AUTHORITY")                    return  # ----------------------------- # Predicate P4 — Idempotence # -----------------------------  def deep_equal(a, b):    return json.dumps(a, sort_keys=True) == json.dumps(b, sort_keys=True)  def check_idempotence(project_fn, field_state, result: VerifierResult):     out1 = project_fn(copy.deepcopy(field_state))     out2 = project_fn(copy.deepcopy(field_state))    if not deep_equal(out1, out2):         result.fail("P4_NON_IDEMPOTENT")  # ----------------------------- # Predicate P5 — Crossed-Link Neutrality # -----------------------------  def check_crossed_link(crossed_link_json: Dict[str, Any], result: VerifierResult):    if crossed_link_json.get("activation") != "external_only":         result.fail("P5_CROSSED_LINK")    if crossed_link_json.get("internal_trigger", True):         result.fail("P5_CROSSED_LINK")  # ----------------------------- # Predicate P6 — Structural Correspondence # -----------------------------  REQUIRED_KEYS = {"nodes", "relations"}  def check_structural_correspondence(field_state: Dict[str, Any], result: VerifierResult):    if not REQUIRED_KEYS.issubset(field_state.keys()):         result.fail("P6_STRUCTURAL_CORRESPONDENCE")  # ----------------------------- # Master Verify # -----------------------------  def verify(     source_code: str,     project_fn,     field_state: Dict[str, Any],     crossed_link: Dict[str, Any] ):     result = VerifierResult()     check_non_decisional(source_code, result)     check_no_optimization(source_code, result)     check_time_neutrality(source_code, result)     check_idempotence(project_fn, field_state, result)     check_crossed_link(crossed_link, result)     check_structural_correspondence(field_state, result)    return result.summary()`

---

## Gebruik (voorbeeld)

`from hexsys_verifier import verify  def project(field):    # pure projectie: geen mutatie, geen optimalisatie     return {        "nodes": field["nodes"],        "relations": field["relations"]     } source_code = open("runtime.py").read() field_state = {    "nodes": [{"id": "n1"}, {"id": "n2"}],    "relations": [{"a": "n1", "b": "n2", "visibility": "mid"}] } crossed_link = {    "status": "available",    "activation": "external_only",    "internal_trigger": False } result = verify(source_code, project, field_state, crossed_link) print(result)`

**Uitkomst:**

- `{ pass: true }` → geldige hexSYStemOPErates-instantie

- `{ pass: false, violations: [...] }` → **ongeldig**
